<?php/******************************************************************************* *   copyright				: (C) 2014 - 2018 Pro-Auction-Script *   site					: https://www.pro-auction-script.com *   Script License			: https://www.pro-auction-script.com/contents.php?show=free_license *******************************************************************************/include 'common.php';$id = (isset($_GET['id'])) ? intval($_GET['id']) : 0;if ($id > 0){	$query = "SELECT n.title As t, n.content As c, n.new_date, t.* FROM " . $DBPrefix . "news n			LEFT JOIN " . $DBPrefix . "news_translated t ON (t.id = n.id)			WHERE n.id = :id AND t.lang = :lang AND n.suspended != 1";	$params = array(		array(':id', $id, 'int'),		array(':lang', $language, 'str')	);	$db->query($query, $params);	$new = $db->result();	if (!empty($new['title']) && !empty($new['content']))	{		$title = stripslashes($new['title']);		$content = stripslashes($new['content']);	}	else	{		$title = stripslashes($new['t']);		$content = stripslashes($new['c']);	}	$template->assign_block_vars('news', array(			'CONT' => $content			));}else{	// Build news index	$query = "SELECT n.title As t, n.new_date, t.* FROM " . $DBPrefix . "news n			LEFT JOIN " . $DBPrefix . "news_translated t ON (t.id = n.id)			WHERE t.lang = :lang AND n.suspended != 1 ORDER BY n.new_date DESC, n.id DESC";	$params = array(		array(':lang', $language, 'str')	);	$db->query($query, $params);	while ($row = $db->result())	{		if (!empty($row['title']))		{			$title = stripslashes($row['title']);		}		else		{			$title = stripslashes($row['t']);		}		$template->assign_block_vars('list', array(				'TITLE' => $title,				'DATE' => $system->dateToTimestamp($row['new_date']),				'ID' => $row['id']				));	}}$template->assign_vars(array(		'TITLE' => ($id > 0) ? stripslashes($new['title']) . ' <small><span class="muted">' . $system->dateToTimestamp($new['new_date']) . '</span></small>' : $MSG['282']		));include 'header.php';$template->set_filenames(array(		'body' => 'viewnews.tpl'		));$template->display('body');include 'footer.php';